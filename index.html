<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Great Cat-tastrophe 2025 Results</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Fredoka One for maximum silliness -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
    <!-- Confetti Library -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        body {
            font-family: 'Comic Neue', cursive;
            background-color: #fff5f5;
            background-image: radial-gradient(#ffe4e6 2px, transparent 2px);
            background-size: 30px 30px;
        }
        
        h1, h2, h3, .silly-font {
            font-family: 'Fredoka One', cursive;
        }

        /* Card Hover Effects */
        .cat-card {
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .cat-card:hover {
            transform: scale(1.03) translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.1);
            z-index: 10;
        }

        /* Podium Animations */
        .podium-card {
            transition: transform 0.4s;
        }
        .podium-1 {
            animation: float 4s ease-in-out infinite;
            z-index: 20;
        }
        .podium-2 {
            animation: float-delayed 5s ease-in-out infinite;
            z-index: 10;
        }
        .podium-3 {
            animation: float-delayed-2 6s ease-in-out infinite;
            z-index: 10;
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
            100% { transform: translateY(0px); }
        }
        @keyframes float-delayed {
            0% { transform: translateY(20px); } /* Starts lower */
            50% { transform: translateY(5px); }
            100% { transform: translateY(20px); }
        }
        @keyframes float-delayed-2 {
            0% { transform: translateY(30px); } /* Starts even lower */
            50% { transform: translateY(15px); }
            100% { transform: translateY(30px); }
        }

        /* Special Prize Cards */
        .prize-card {
            background: linear-gradient(135deg, #fff 0%, #f0fdf4 100%);
            border: 4px dashed #4ade80;
        }

        .cat-avatar {
            background-color: #f3f4f6;
            border-radius: 50%;
            border: 4px solid white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .paw-print {
            position: fixed;
            font-size: 2rem;
            opacity: 0.1;
            pointer-events: none;
            z-index: 0;
        }
        
        .math-pill {
            background-color: #f0f9ff;
            color: #0369a1;
            font-family: monospace;
            font-size: 0.75rem;
            padding: 4px 8px;
            border-radius: 999px;
            border: 1px solid #bae6fd;
            display: inline-block;
            margin-top: 4px;
        }
        
        .math-explanation {
            background-color: #ffffff;
            border: 2px solid #a7f3d0;
            padding: 24px;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="text-gray-800 overflow-x-hidden">

    <!-- Navbar / Header -->
    <header class="bg-pink-500 text-white p-6 shadow-lg transform -skew-y-2 mb-10 border-b-8 border-pink-700">
        <div class="container mx-auto text-center transform skew-y-2">
            <h1 class="text-4xl md:text-6xl text-yellow-300 drop-shadow-md mb-2">üèÜ The Grand Meow-off üèÜ</h1>
            <p class="text-xl font-bold">Official Results of the 2025 Cat Contest</p>
            <p class="text-sm opacity-90 mt-2">(Powered by Advanced Meow-thematics)</p>
        </div>
    </header>

    <main class="container mx-auto px-4 pb-20 relative z-10">
        
        <!-- Podium Section (Top 3) -->
        <div class="mb-20 mt-8">
             <h2 class="text-4xl text-center text-pink-600 mb-12 silly-font drop-shadow-sm">üëë The Royal Family üëë</h2>
            
             <!-- Flex container for podium alignment -->
             <div class="flex flex-col md:flex-row items-end justify-center gap-4 md:gap-0 h-auto md:h-96" id="podium-container">
                 <!-- Podium Javascript will inject here -->
             </div>
        </div>

        <!-- Special Prizes Section -->
        <div class="mb-20">
            <h2 class="text-3xl text-center text-purple-600 mb-8 silly-font">üèÖ Special Hall of Fame üèÖ</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6" id="prizes-container">
                <!-- JS will inject prizes here -->
            </div>
        </div>

        <!-- Stats Grid -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-16">
            <div class="bg-white p-6 rounded-2xl shadow-lg border-b-4 border-blue-400 text-center transform -rotate-1 hover:rotate-0 transition">
                <div class="text-4xl mb-2">üó≥Ô∏è</div>
                <h3 class="text-xl font-bold text-blue-600">Total Votes Cast</h3>
                <p class="text-3xl font-black" id="total-votes">0</p>
            </div>
            <div class="bg-white p-6 rounded-2xl shadow-lg border-b-4 border-purple-400 text-center transform rotate-1 hover:rotate-0 transition">
                <div class="text-4xl mb-2">üßÆ</div>
                <h3 class="text-xl font-bold text-purple-600">Fairness Check</h3>
                <p class="text-lg font-bold">Verified Math</p>
            </div>
            <div class="bg-white p-6 rounded-2xl shadow-lg border-b-4 border-green-400 text-center transform -rotate-1 hover:rotate-0 transition">
                <div class="text-4xl mb-2">üêà</div>
                <h3 class="text-xl font-bold text-green-600">Contestants</h3>
                <p class="text-3xl font-black" id="total-cats">0</p>
            </div>
        </div>

        <!-- Leaderboard (Rank 4+) -->
        <div class="max-w-4xl mx-auto">
            <h2 class="text-3xl text-center text-gray-700 mb-8 silly-font">‚ú® Honorable Meow-ntions ‚ú®</h2>
            <div class="space-y-4" id="leaderboard-container">
                <!-- Javascript will populate this -->
            </div>
        </div>
        
        <!-- Math Explanation Section -->
        <div class="max-w-4xl mx-auto mt-20">
            <h2 class="text-3xl text-center text-green-700 mb-6 silly-font">üî¨ How The Advanced Meow-thematics Work ü§ì</h2>
            <div class="math-explanation">
                <p class="mb-4 text-gray-700">The final ranking is based on the **Average Score** because we want the best-rated cat to win, not just the most popular cat. **Total Number of Votes** tells you who's the most famous, but **Average Score** tells you who's the most loved!</p>
                <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-500 mb-4">
                    <p class="text-lg font-bold text-green-800">The Formula (The Average Score):</p>
                    <p class="text-xl font-mono text-green-900 mt-2">
                        <span class="font-extrabold text-2xl">Average Score</span> = $$\frac{\text{Total Points Received (1s + 2s + 3s + 4s + 5s)}}{\text{Total Number of Votes}}$$
                    </p>
                </div>
                <ul class="list-disc list-inside space-y-2 text-gray-600">
                    <li>Scores are based on a 1 (lowest) to 5 (highest) rating system.</li>
                    <li>The **Total Points Received** is the sum of every individual rating a cat received. Think of this as the cat's total lifetime score.</li>
                    <li>The **Total Number of Votes** (or just "Votes") is simply how many people rated that cat. Think of it as **popularity**. (This number is the denominator in the formula).</li>
                    <li>We calculate the average, round it to two decimal places, and rank the cats from highest average to lowest.</li>
                    <li>The small calculation you see on each card (e.g., `106 √∑ 27`) confirms this calculation.</li>
                </ul>
            </div>
        </div>

    </main>

    <footer class="bg-gray-800 text-white py-8 mt-10 text-center">
        <p class="text-lg mb-2">üêæ Made for the love of cats üêæ</p>
        <p class="text-xs text-gray-500">Avatars generated by Robohash (because real cats refused to sign model releases).</p>
    </footer>

    <!-- Background Paws Generation -->
    <div id="paws-container"></div>

    <script>
        // --- DATA ---
        // Includes extended stats (Total Score, Count, Fives) calculated from your CSV
        const catMetadata = {
            "Fadi": { desc: "The King of the Jungle (House)" },
            "The night": { desc: "Dark mode activated" },
            "Auwias": { desc: "Bronze but bold" },
            "Hop": { desc: "Hopped into our hearts" },
            "mocaccino": { desc: "Sweet like coffee" },
            "zaid": { desc: "Solid mid-table performance" },
            "Polar": { desc: "Cool as ice" },
            "Qabls": { desc: "Most votes received! (Paparazzi Fav)" },
            "L": { desc: "Mysterious single letter name" },
            "bashar": { desc: "Trying his best" },
            "Zi": { desc: "Maybe was sleeping in the pics?" }
        };

        const results = [
            { rank: 1, name: "Fadi", score: 3.93, votes: 27, totalScore: 106, fives: 17 },
            { rank: 2, name: "The night", score: 3.71, votes: 108, totalScore: 401, fives: 49 },
            { rank: 3, name: "Auwias", score: 3.68, votes: 135, totalScore: 497, fives: 63 },
            { rank: 4, name: "Hop", score: 3.63, votes: 54, totalScore: 196, fives: 25 },
            { rank: 5, name: "mocaccino", score: 3.50, votes: 54, totalScore: 189, fives: 19 },
            { rank: 6, name: "zaid", score: 3.44, votes: 27, totalScore: 93, fives: 10 },
            { rank: 7, name: "Polar", score: 3.29, votes: 108, totalScore: 355, fives: 43 },
            { rank: 8, name: "Qabls", score: 3.18, votes: 162, totalScore: 515, fives: 47 },
            { rank: 9, name: "L", score: 3.07, votes: 27, totalScore: 83, fives: 9 },
            { rank: 10, name: "bashar", score: 3.05, votes: 81, totalScore: 247, fives: 25 },
            { rank: 11, name: "Zi", score: 3.01, votes: 135, totalScore: 407, fives: 37 }
        ];

        // --- UTILS ---
        function getCatImage(name) {
            // RoboHash generates unique cat images based on the text string
            return `https://robohash.org/${name}?set=set4&bgset=bg1&size=200x200`;
        }

        function getCatDesc(name) {
            return catMetadata[name]?.desc || "A mysterious challenger!";
        }

        // --- RENDER LOGIC ---

        document.addEventListener('DOMContentLoaded', () => {
            renderPodium();
            renderPrizes();
            renderStats();
            renderLeaderboard();
            generateBackgroundPaws();
            // Wait for MathJax (LaTeX) to process the formula before launching confetti
            setTimeout(() => {
                if (typeof MathJax !== 'undefined') {
                    MathJax.typeset();
                }
                launchConfetti();
            }, 800);
        });

        function renderPodium() {
            const container = document.getElementById('podium-container');
            if (results.length < 3) return; 

            const winner = results[0];
            const second = results[1];
            const third = results[2];

            const secondPlaceHTML = createPodiumCard(second, 2, "bg-gray-100 border-gray-300", "text-gray-500", "scale-90 md:translate-y-8 podium-2", "ü•à");
            const firstPlaceHTML = createPodiumCard(winner, 1, "bg-yellow-50 border-yellow-400 ring-4 ring-yellow-200", "text-yellow-600", "scale-110 -translate-y-4 md:-translate-y-12 z-20 podium-1", "üëë");
            const thirdPlaceHTML = createPodiumCard(third, 3, "bg-orange-50 border-orange-300", "text-orange-600", "scale-90 md:translate-y-12 podium-3", "ü•â");
            
            container.innerHTML = `
                <div class="order-2 md:order-1 w-full md:w-1/3 flex justify-center">${secondPlaceHTML}</div>
                <div class="order-1 md:order-2 w-full md:w-1/3 flex justify-center mb-8 md:mb-0">${firstPlaceHTML}</div>
                <div class="order-3 md:order-3 w-full md:w-1/3 flex justify-center">${thirdPlaceHTML}</div>
            `;
        }

        function createPodiumCard(cat, rank, colorClasses, textClasses, animClasses, badgeIcon) {
            return `
                <div class="relative w-full max-w-xs ${animClasses} cursor-pointer group" onclick="launchConfetti()">
                    <div class="absolute -top-6 left-1/2 transform -translate-x-1/2 text-5xl z-30 drop-shadow-md">${badgeIcon}</div>
                    <div class="${colorClasses} rounded-3xl p-6 shadow-xl border-b-8 text-center flex flex-col items-center">
                        <img src="${getCatImage(cat.name)}" alt="${cat.name}" class="cat-avatar w-32 h-32 mb-4 object-cover bg-white">
                        <h2 class="text-2xl font-bold mb-1 truncate w-full">${cat.name}</h2>
                        <p class="text-xs text-gray-500 italic mb-3 px-2 h-8 overflow-hidden">"${getCatDesc(cat.name)}"</p>
                        <div class="bg-white/80 rounded-lg px-4 py-2 w-full">
                            <div class="text-3xl font-black ${textClasses}">${cat.score}</div>
                            <div class="text-xs text-gray-400 uppercase tracking-wider mb-2">Avg Score</div>
                            <div class="math-pill border-t border-gray-200 pt-1 mt-1 block">
                                ${cat.totalScore} pts / ${cat.votes} votes
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderPrizes() {
            const container = document.getElementById('prizes-container');
            
            // Logic to find winners for special categories
            const mostVotesCat = results.reduce((prev, current) => (prev.votes > current.votes) ? prev : current);
            const mostFivesCat = results.reduce((prev, current) => (prev.fives > current.fives) ? prev : current);
            // Winner is already results[0]

            const prizes = [
                { title: "The Crowd Pleaser", icon: "üì¢", cat: mostVotesCat, reason: `Most Votes Received (${mostVotesCat.votes})`, color: "border-purple-400 bg-purple-50" },
                { title: "5-Star Magnet", icon: "‚≠ê", cat: mostFivesCat, reason: `Most 5/5 Ratings (${mostFivesCat.fives})`, color: "border-yellow-400 bg-yellow-50" },
                { title: "The Perfectionist", icon: "üéØ", cat: results[0], reason: "Highest Average Score", color: "border-green-400 bg-green-50" }
            ];

            prizes.forEach(prize => {
                container.innerHTML += `
                    <div class="bg-white rounded-xl p-6 shadow-md border-b-4 ${prize.color} flex flex-col items-center text-center transform hover:scale-105 transition duration-300">
                        <div class="text-4xl mb-2">${prize.icon}</div>
                        <h3 class="font-bold text-xl mb-2 text-gray-800">${prize.title}</h3>
                        <img src="${getCatImage(prize.cat.name)}" class="w-16 h-16 rounded-full border-2 border-white shadow mb-2">
                        <div class="font-bold text-lg">${prize.cat.name}</div>
                        <div class="text-sm text-gray-600 bg-white/50 px-2 py-1 rounded-full mt-1">${prize.reason}</div>
                    </div>
                `;
            });
        }

        function renderStats() {
            const totalVotes = results.reduce((acc, curr) => acc + curr.votes, 0);
            document.getElementById('total-votes').textContent = totalVotes;
            document.getElementById('total-cats').textContent = results.length;
        }

        function renderLeaderboard() {
            const container = document.getElementById('leaderboard-container');
            
            const restOfCats = results.slice(3);

            restOfCats.forEach((cat) => {
                const rank = cat.rank;
                const card = document.createElement('div');
                card.className = `cat-card bg-white p-4 rounded-xl shadow border-l-8 flex items-center justify-between hover:bg-gray-50 ${getBorderColor(rank)}`;
                
                card.innerHTML = `
                    <div class="flex items-center gap-4 flex-1">
                        <div class="text-2xl font-bold w-8 text-center text-gray-300">#${rank}</div>
                        <img src="${getCatImage(cat.name)}" alt="${cat.name}" class="w-16 h-16 rounded-full border-2 border-white shadow-sm bg-gray-100">
                        <div>
                            <h3 class="text-lg font-bold text-gray-800 flex items-center flex-wrap gap-2">
                                ${cat.name}
                            </h3>
                            <p class="text-sm text-gray-500 italic">"${getCatDesc(cat.name)}"</p>
                        </div>
                    </div>
                    <div class="text-right pl-4">
                        <div class="text-xl font-bold text-gray-700">${cat.score}</div>
                        <div class="math-pill mt-1">
                            ${cat.totalScore} √∑ ${cat.votes}
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function getBorderColor(rank) {
            const colors = ['border-pink-300', 'border-blue-300', 'border-green-300', 'border-purple-300', 'border-yellow-300'];
            return colors[rank % colors.length];
        }

        function launchConfetti() {
            var duration = 2 * 1000;
            var animationEnd = Date.now() + duration;
            var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

            var random = function(min, max) { return Math.random() * (max - min) + min; }

            var interval = setInterval(function() {
                var timeLeft = animationEnd - Date.now();
                if (timeLeft <= 0) return clearInterval(interval);
                var particleCount = 50 * (timeLeft / duration);
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: random(0.1, 0.3), y: Math.random() - 0.2 } }));
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: random(0.7, 0.9), y: Math.random() - 0.2 } }));
            }, 250);
        }

        function generateBackgroundPaws() {
            const container = document.getElementById('paws-container');
            for(let i=0; i<20; i++) {
                const paw = document.createElement('div');
                paw.textContent = 'üêæ';
                paw.className = 'paw-print';
                paw.style.left = Math.random() * 100 + 'vw';
                paw.style.top = Math.random() * 100 + 'vh';
                paw.style.transform = `rotate(${Math.random() * 360}deg)`;
                container.appendChild(paw);
            }
        }
    </script>
    <!-- MathJax for rendering LaTeX formula -->
    <script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
</body>
</html>
